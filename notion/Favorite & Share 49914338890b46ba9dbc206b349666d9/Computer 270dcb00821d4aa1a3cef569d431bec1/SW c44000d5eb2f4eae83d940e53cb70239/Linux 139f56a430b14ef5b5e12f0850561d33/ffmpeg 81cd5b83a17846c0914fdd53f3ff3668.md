# ffmpeg

### [mp3Convert.sh](http://mp3convert.sh/)

ffmpeg -i "$1" -codec:v copy -codec:a libmp3lame -q:a 2 output.mp3

ffmpeg -i input.mkv -codec copy -s 1280x720 output.mp4

ffmpeg -i ${INAV} -c:v libx265 -crf 26 -preset fast -c:a aac -b:a 128k ${INAV}.o.mp4

for f in *.PNG; do convert ${f} "${f}.jpg"; done

for f in *.HEIC; do convert ${f} "${f}.jpg"; done

ffmpeg -i ${INAV} -c:v libx265 -crf 26 -c:a aac -s 1920x1080 ${INAV}.mp4

### List to mp4

Here show the step that youtube list convert to a mp4 file.

```
mkdir newfolder
cd newfloder

../youtube-dl -f 251 --max-sleep-interval 10 --min-sleep-interval 3 <https://www.youtube.com/playlist?list=OLAK5uy_kBPoleXRv5dQX0kWP7LzcJkym5Rd-AvWQ;echo> $'\\07'; sleep 1; echo $'\\07'; sleep 1;  echo $'\\07'; sleep 1; echo $'\\07'; sleep 1; echo $'\\07';

ls -1 *.webm | awk '$0="file \\""$0"\\""' | sed "s/\\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.webm;  echo $'\\07'; sleep 1; echo $'\\07'; sleep 1; echo $'\\07';

ffmpeg -loop 1 -y -i ../page.jpg -i concat_all.webm -shortest -c:a aac -c:v libx264 -r 30 -pix_fmt yuv420p Final_output.mp4;  echo $'\\07'; sleep 1; echo $'\\07'; sleep 1; echo $'\\07';

```

### to mp3

ffmpeg -i concat_all.webm -codec:v copy -codec:a libmp3lame -q:a 2 output.mp3

ee="webm";for f in *.${ee}; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 "${f%.${ee}}.mp3"; done

[https://www.youtube.com/playlist?list=OLAK5uy_nowTnU-uyBdz6nG5zEElCNLHrO_kzltJU](https://www.youtube.com/playlist?list=OLAK5uy_nowTnU-uyBdz6nG5zEElCNLHrO_kzltJU)

ee="m4a";for f in *.${ee}; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 "${f%.${ee}}.mp3"; done

ffmpeg -i joyce.webm -codec:v copy -codec:a libmp3lame -q:a 2 joyce.mp3

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－

../youtube-dl -f 251 --max-sleep-interval 10 --min-sleep-interval 3 [https://www.youtube.com/playlist?list=PL9P9juNnx4d5FXANvJRLmyDSYJ6WX8j08;echo](https://www.youtube.com/playlist?list=PL9P9juNnx4d5FXANvJRLmyDSYJ6WX8j08;echo) $'\07'; sleep 1; echo $'\07'; sleep 1;  echo $'\07'; sleep 1; echo $'\07'; sleep 1; echo $'\07';

ls -1 *.webm | awk '$0="file \""$0"\""' | sed "s/\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.webm;  echo $'\07'; sleep 1; echo $'\07'; sleep 1; echo $'\07';

ffmpeg -loop 1 -y -i ../page.jpg -i concat_all.webm -shortest -c:a aac -c:v libx264 -r 30 -pix_fmt yuv420p Final_output.mp4;  echo $'\07'; sleep 1; echo $'\07'; sleep 1; echo $'\07';

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－

en="m4a";for f in *.${en}; do echo ${f%.${en}}.nice ; done

－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－

ends="m4a";ls -1 *.${ends} | awk '$0="file \""$0"\""' | sed "s/\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.${ends};  echo $'\07'; sleep 1; echo $'\07'; sleep 1; echo $'\07';

---

mkdir newfiles
for f in *.webm; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 newfiles/"${f%.m4a}.mp3"; done

ls -1 *.mp3 | awk '$0="file \""$0"\""' | sed "s/\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.mp3

ffmpeg -loop 1 -y -i chopin.jpg -i concat_all.mp3 -shortest -c:a aac -c:v libx264 -r 30 -pix_fmt yuv420p NewOne.mp4

---

# ffmpeg

m4a to mp3 to mp4

### more in easy ubuntu

---

### Multi file transfer to multi mp4

```
cd "to the m4a file directory"
mkdir newfiles
for f in *.m4a; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 newfiles/"${f%.m4a}.mp3"; done

for f in *.PNG; do convert ${f} "${f}.jpg"; done

for f in *.m4a; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 "${f%.m4a}.mp3"; done

ee="webm";for f in *.${ee}; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 "${f%.${ee}}.mp3"; done

```

### M4a transfer to mp3

```
ffmpeg -i InputFile.m4a -codec:v copy -codec:a libmp3lame -q:a 2 output.mp3

```

### MP4 to mp3

```
ffmpeg -i if.mp4 -codec:v copy -codec:a libmp3lame -q:a 2 output.mp3

```

### conver to webm

ffmpeg -i input.mp4 -c:v libvpx-vp9 -crf 30 -b:v 0 -b:a 128k -c:a libopus output.webm

### merge multi mp3 to one

multi to one mp3

```
ls -1 *.mp3 | awk '$0="file \""$0"\""' | sed "s/\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.mp3

```

### multi to one m4a

```
ls -1 *.m4a | awk '$0="file \""$0"\""' | sed "s/\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.m4a

```

### Merge jpg and m4a to mp4

```
ffmpeg -loop 1 -y -i testfile.jpg -i testa.m4a -shortest -c:a aac -c:v libx264 -r 30 -pix_fmt yuv420p out2.mp4

```

f: force format
r: frame rate
i: input files assuming your files are filename001.jpg, filename002.jpg, ...
vcodec: video codec
crf: constant rate factor (0-51). 17-18 is (nearly) visually lossless. See Encode/H.264
pix_fmt: pixel format

ffmpeg -loop 1 -y -i testfile.jpg -i testa.m4a -shortest -acodec copy -vcodec mjpeg result.avi

### to MP4

ffmpeg -i LostInTranslation.mkv -codec copy LostInTranslation.mp4
ffmpeg -i input_filename.avi -c:v copy -c:a copy -y output_filename.mp4
ffmpeg -i input.mkv -codec copy -s 1280x720 output.mp4
ffmpeg -i ${INAV} -c:v libx265 -crf 26 -preset fast -c:a aac -b:a 128k output.mp4
ffmpeg -i file_example_AVI_1280_1_5MG.avi -c:a copy -c:v vp9 -b:v 100K outputVP9.mp4

### Multi to one mp3

```bash
ls -1 *.mp3 | awk '$0="file \""$0"\""' | sed "s/\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.mp3

```

### MP3 & JPG to MP4

```bash
ffmpeg -loop 1 -y -i face.jpg -i concat_all.mp3 -shortest -c:a aac -c:v libx264 -r 30 -pix_fmt yuv420p out2.mp4
```