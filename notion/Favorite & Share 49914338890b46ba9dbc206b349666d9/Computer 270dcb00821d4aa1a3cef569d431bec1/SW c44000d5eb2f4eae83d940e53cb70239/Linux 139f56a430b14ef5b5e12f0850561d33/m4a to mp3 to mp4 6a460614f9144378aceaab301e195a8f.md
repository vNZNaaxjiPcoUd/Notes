# m4a to mp3 to mp4

# m4a to mp3 to mp4

Multi file transfer to multi mp4

```
cd "to the m4a file directory"
mkdir newfiles
for f in *.m4a; do ffmpeg -i "$f" -codec:v copy -codec:a libmp3lame -q:a 2 newfiles/"${f%.m4a}.mp3"; done

```

M4a transfer to mp3

```
ffmpeg -i InputFile.m4a -codec:v copy -codec:a libmp3lame -q:a 2 output.mp3

```

MP4 to mp3

```
ffmpeg -i if.mp4 -codec:v copy -codec:a libmp3lame -q:a 2 output.mp3

```

### merge multi mp3 to one

multi to one mp3

```
ls -1 *.mp3 | awk '$0="file \\""$0"\\""' | sed "s/\\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.mp3

```

multi to one m4a

```
ls -1 *.m4a | awk '$0="file \\""$0"\\""' | sed "s/\\"/'/g" | ffmpeg -f concat -protocol_whitelist file,pipe -safe 0 -i - -c copy concat_all.m4a

```

### jpg to mp4

Merge jpg and m4a to mp4

```
ffmpeg -loop 1 -y -i testfile.jpg -i testa.m4a -shortest -c:a aac -c:v libx264 -r 30 -pix_fmt yuv420p out2.mp4

```

f: force format
r: frame rate
i: input files assuming your files are filename001.jpg, filename002.jpg, ...
vcodec: video codec
crf: constant rate factor (0-51). 17-18 is (nearly) visually lossless. See Encode/H.264
pix_fmt: pixel format

ffmpeg -loop 1 -y -i testfile.jpg -i testa.m4a -shortest -acodec copy -vcodec mjpeg result.avi