# webdav

# 

- [Nginx webdav](https://zshmobi.com/2017/11/07/deploy-webdav-server-with-nginx-in-ubuntu/)
- install
#*安装完整版
$ sudo apt install nginx-full
    
    ```
      #*开启 gzip
      $ sudo sed -i '/gzip_/ s/#\\ //g' /etc/nginx/nginx.conf
    
    ```
    
- setup
创建 webdav 虚拟主机

```
$ sudo cat > /etc/nginx/conf.d/webdav.conf < EOF
server {
    listen 80;
    listen [::]:80;
	  autoindex on;
	  charset utf-8;

    server_name dav.your_domain;

    #*账号认证
    auth_basic              realm_name;
    auth_basic_user_file    /etc/nginx/.passwords.list;

    dav_methods     PUT DELETE MKCOL COPY MOVE;
    dav_ext_methods PROPFIND OPTIONS;
    dav_access      user:rw group:rw all:r;

    #*临时中转目录，提高安全性；亦可取消
    client_body_temp_path   /tmp/nginx/client-bodies;

    #*上传文件的最大容量限制，0为不限制
    client_max_body_size    0;

    create_full_put_path    on;

        # 注意建立目录并给 www-data 权限
    root /data/webdav/$remote_user;
}

```

- 创建账号认证文件
创建新用户
$ echo -n 'username:' | sudo tee /etc/nginx/.passwords.list
设定用户密码
$ openssl passwd -apr1 | sudo tee -a /etc/nginx/.passwords.list
Password: # 输入用户的密码
- restart nginx