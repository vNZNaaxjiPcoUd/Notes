# nc

# nc

while true ; do nc -l -p 1500 -e /path/to/yourprogram ; done
while true ; do nc -l -p 1500 -c 'echo -e "HTTP/1.1 200 OK\n\n $(date)"'; done
while true ; do  echo -e "HTTP/1.1 200 OK\n\n $(date)" | nc -l -p 1500  ; done

# Simple Chat

在A終端機啟用 nc -l 1234
在B終端機啟用 nc localhost 1234

# File Transfer

在A終端機 nc -v -l 1234 < xyz.jar
在B終端機 nc localhost 1234 > new.jar

# Port Scan

nc -n -z -w 1 127.0.0.1 1-2000
-n 跳掉DNS求解;以節省時間
-z 只掃描是否有daemon在聽,後面不送資料
-w 設定timeout秒數
後面要接ip,不能用 localhost,因為我們用-n跳掉了,再來接 port range

# Remote Shell / Backdoor

'''
終端機A
ncat -v -l -p 1234 -e /bin/bash
Ncat: Version 6.25 ( [http://nmap.org/ncat](http://nmap.org/ncat) )
Ncat: Listening on :::1234
Ncat: Listening on 0.0.0.0:1234
終端機B使用一般natcat連接後
nc localhost 1234

終端機A出現,代表連接上了
Ncat: Connection from ::1.
Ncat: Connection from ::1:43786.
終端機B傳送date,由A的bash執行後回傳
date
Tue Oct 27 21:49:48 CST 2014
'''

# Remote shell

Option -e only on the Windows version? Or use nc 1.10.

# nc -lp 4444 -e /bin/bash

# nc -lp 4444 -e cmd.exe

# Simple Web Server

# while true; do nc -l -p 80 < unixtoolbox.xhtml; done

# 教學

Server : script -qf | tee >(nc -kl 1234) >(nc -kl 1235) >(nc -kl 1236)
client : telnet teacher_ip 1234

# 偽造 IP

NetCAT 還可以變造過程中經過的結點 IP。
例如這個例子，最終目的地為 10.1.1.1 的 port 23。但是中間的結點變造經過了 10.10.4.5 …10.10.5.8 等
nc –g 10.10.4.5 –g 10.10.5.8 –g 10.10.7.4 –g 10.10.9.9     10.1.1.1   23

# PROXY

([http://www.noah.org/wiki/TCP_proxy_with_netcat](http://www.noah.org/wiki/TCP_proxy_with_netcat))

1. xx
mkfifo /tmp/fifo
nc -lk -p 8080 </tmp/fifo | nc [www.noah.org](http://www.noah.org/) 80 >/tmp/fifo
2. xx
mkfifo /tmp/fifo
nc -lk -p 8080 </tmp/fifo | sed -u -e 's/^Host.*/Host: [www.noah.org/](http://www.noah.org/)' | tee -a http_request.log |nc [www.noah.org](http://www.noah.org/) 80 | tee -a http_response.log >/tmp/fifo
3. xx
mkfifo /tmp/fifo
nc -q -1 -l -p 8080 </tmp/fifo \
| sed -u -e "s/^Host:.*/Host: [www.noah.org/](http://www.noah.org/)" -e "/^Accept-Encoding:.*/d" -e "/^Connection:.*/d" -e "/^If-None-Match:.*/d" -e "/^If-Modified-Since:.*/d" \
| tee -i -a http_request.log \
| nc -q -1 [www.noah.org](http://www.noah.org/) 80 \
| sed -u -e "s/www.noah.org/${HOSTNAME}:8080/ig" \
| sed -u -e "s/noah.org/${HOSTNAME}:8080/ig" \
| tee -i -a http_response.log >/tmp/fifo
4. xx
([https://notes.tweakblogs.net/blog/7955/using-netcat-to-build-a-simple-tcp-proxy-in-linux.html](https://notes.tweakblogs.net/blog/7955/using-netcat-to-build-a-simple-tcp-proxy-in-linux.html))